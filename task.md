# 音声文字起こしアプリ開発タスク (macOS版)

## Phase 0: プロジェクト初期設定 (週0)

### 0.1 プロジェクト基盤構築

- [x] Electron + React プロジェクトの雛形作成
- [x] TypeScript設定とESLint/Prettier設定
- [x] TailwindCSS設定
- [x] 基本的なディレクトリ構造設計
- [x] package.json の依存関係設定

### 0.2 開発環境整備

- [x] macOS開発環境セットアップ
- [x] ビルド・パッケージング設定（Electron Builder for macOS）
- [x] デバッグ環境構築
- [x] Git ブランチ戦略設定
  - [x] mainブランチをデフォルトブランチに設定
  - [x] feat/\* ブランチ命名規則の確認
  - [x] PRテンプレート作成
  - [x] ブランチ保護ルール設定（mainブランチ）

## Phase 1: 音声キャプチャ機能実装 (週1)

### 1.1 音声キャプチャ基盤

- [x] macOS CoreAudio 音声キャプチャライブラリ選定・導入
- [x] CoreAudio loopback 機能実装
- [x] 音声デバイス列挙機能実装
- [x] 音声ストリーム取得機能実装
- [x] PCM データ形式での音声取得確認

### 1.2 音声処理・バッファリング

- [x] 音声データのバッファリング機能実装
- [x] 250ms チャンクでの音声分割処理
- [x] 音声品質・サンプリングレート設定
- [x] 音声レベル監視機能（VUメーター）

### 1.3 仮想オーディオケーブル対応

- [x] 仮想オーディオデバイス自動生成機能
- [x] システム音声とマイク音声の混合機能
- [x] 音声ルーティング設定UI

## Phase 2: STT（音声認識）機能実装 (週2)

### 2.1 Whisper.cpp ローカル統合

- [x] Whisper.cpp ライブラリ導入・設定
- [x] ローカル音声認識エンジン実装
- [x] ストリーミング音声認識機能実装
- [x] 認識精度・レイテンシ最適化

### 2.2 クラウドSTT API統合

- [x] AssemblyAI API統合
- [x] Deepgram API統合
- [x] Google STT API統合
- [x] WebSocket/HTTP2 ストリーミング実装

### 2.3 STTエンジン抽象化

- [x] STTプロバイダー抽象クラス設計
- [x] エンジン切替機能実装
- [x] 設定UI（ローカル/クラウド選択）
- [x] エラーハンドリング・フォールバック機能

## Phase 3: 文字起こしデータ処理 (週2-3)

### 3.1 トランスクリプト集約

- [x] 部分文字起こしデータの時系列マージ機能
- [x] 500ms バッチ更新処理実装
- [x] 話者分離機能（話者1/話者2タグ付け）
- [x] 文字起こしデータの正規化・クリーニング

### 3.2 リアルタイム表示機能

- [x] ライブ文字起こし表示UI実装
- [x] スクロール・自動更新機能
- [x] 話者別色分け表示
- [x] タイムスタンプ表示機能

## Phase 4: LLM要約機能実装 (週3)

### 4.1 LLMプロバイダー統合

- [x] OpenAI GPT-4o API統合
- [x] Google Gemini 1.5 Pro API統合
- [x] Local Llama 3 70B (gguf) 統合
- [x] LLMプロバイダー抽象クラス設計

### 4.2 要約・分析機能

- [x] プロンプトテンプレート設計
  - 議論要約
  - トピック抽出
  - アクションアイテム抽出
- [x] 15秒間隔での要約更新機能
- [x] リアルタイム要約表示UI
- [x] トピック別クラスタリング機能

### 4.3 LLM設定・管理

- [x] LLM選択・設定UI
- [x] API キー管理機能
- [x] ローカルモデルダウンロード機能
- [x] コスト監視・制御機能

## Phase 5: UI/UX実装 (週3-4)

### 5.1 メインUI設計・実装

- [x] Electron ウィンドウ設計
- [x] React コンポーネント設計
- [x] タブ形式UI（Transcript/Topics/Highlights）
- [x] レスポンシブデザイン対応

### 5.2 状態管理

- [x] Zustand ストア設計
- [x] 音声・文字起こし・要約状態管理
- [x] 設定状態管理
- [x] エラー状態管理

### 5.3 リアルタイム表示機能

- [x] ライブ文字起こしカード表示
- [x] トピック別ハイライト表示
- [x] 要約パネル表示
- [x] 進行状況インジケーター

## Phase 6: エクスポート機能実装 (週4)

### 6.1 ファイル出力機能

- [ ] Markdown形式エクスポート機能
- [ ] JSON形式エクスポート機能
- [ ] TXT形式エクスポート機能
- [ ] Electron ファイルダイアログ統合

### 6.2 データ整理・フォーマット

- [ ] セッション全体の要約生成
- [ ] タイムスタンプ付き文字起こし
- [ ] 話者別発言整理
- [ ] トピック別セクション分割

### 6.3 ワンクリック機能

- [ ] ワンクリックコピー機能
- [ ] クリップボード統合
- [ ] 自動保存機能
- [ ] エクスポート履歴管理

## Phase 7: テスト・最適化 (週4)

### 7.1 機能テスト

- [ ] macOSでの動作確認
- [ ] 音声キャプチャ品質テスト
- [ ] STT精度テスト
- [ ] LLM要約品質テスト

### 7.2 パフォーマンス最適化

- [ ] メモリ使用量最適化
- [ ] CPU使用率最適化
- [ ] ネットワーク帯域最適化
- [ ] レイテンシ改善

### 7.3 ユーザビリティテスト

- [ ] UI/UX改善
- [ ] エラーハンドリング強化
- [ ] ユーザーフィードバック収集
- [ ] ドキュメント作成

## Phase 8: 配布・デプロイ (週4以降)

### 8.1 パッケージング

- [ ] Electron Builder設定最適化（macOS）
- [ ] macOS向けインストーラー作成（.dmg）
- [ ] 自動更新機能実装
- [ ] macOS署名・証明書設定

### 8.2 ドキュメント・サポート

- [ ] README作成
- [ ] インストールガイド作成
- [ ] 使用方法ドキュメント
- [ ] トラブルシューティングガイド

## 技術的考慮事項

### Git ワークフロー

- [ ] ブランチ戦略: main (デフォルト) + feat/\* 機能ブランチ
- [ ] PR作成 → mainマージのシンプルなフロー
- [ ] コミットメッセージ規約設定
- [ ] コードレビュープロセス設定

### 依存関係管理

- [ ] 音声ライブラリ: `node-core-audio` (macOS CoreAudio対応), `electron-audio-capture`
- [ ] STT: `whisper.cpp`, `assemblyai`, `@google-cloud/speech`
- [ ] LLM: `openai`, `@google/generative-ai`, `llama-cpp-node`
- [ ] UI: `react`, `tailwindcss`, `zustand`

### セキュリティ

- [ ] API キーの安全な保存
- [ ] ローカルデータの暗号化
- [ ] ネットワーク通信のセキュリティ
- [ ] プライバシー保護機能

### エラーハンドリング

- [ ] ネットワーク接続エラー処理
- [ ] API制限・レート制限対応
- [ ] 音声デバイスエラー処理
- [ ] メモリ不足対応
